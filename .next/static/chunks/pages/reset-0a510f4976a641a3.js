(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{1463:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var n=t(7294),o=t(9499),s=t(29),i=t(7794),c=t.n(i),a=t(6312),u=t(7536),p=t(337),l=t(5121),d=t(5893);function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var b=function(e){var r=e.setEmail,t=e.setError,n=e.Error,o=e.setVisible,i=(0,u.cI)({resolver:(0,a.F)(p.zk)}),f=i.register,b=i.handleSubmit,j=function(){var e=(0,s.Z)(c().mark((function e(n){var s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.email,e.prev=1,e.next=4,l.Z.post("api/auth/sendResetPasswordCode",{email:s});case 4:i=e.sent,r(s),alert(i.data.message),o(1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,d.jsxs)("form",{onSubmit:b(j),children:[(0,d.jsx)("input",m({id:"email",type:"email"},f("email"))),(0,d.jsx)("button",{type:"submit",children:"sendMail"}),(0,d.jsx)("div",{children:n})]})};function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v=function(e){var r,t=e.email,n=e.setError,o=e.Error,i=e.setVisible,f=(0,u.cI)({resolver:(0,a.F)(p.lF)}),m=f.register,b=f.handleSubmit,j=f.formState.errors,v=function(){var e=(0,s.Z)(c().mark((function e(r){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.code,console.log(o);try{l.Z.post("api/auth/validateResetCode",{email:t,code:o}),i(2)}catch(s){console.log(s),n(s.response.data.message)}case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,d.jsxs)("form",{onSubmit:b(v),children:[(0,d.jsx)("input",O({id:"code",type:"number"},m("code",{valueAsNumber:!0}))),(0,d.jsx)("button",{type:"submit",children:"code\u3092\u767a\u884c"}),(0,d.jsx)("div",{children:o}),(0,d.jsxs)("p",{style:{marginBottom:"14px",color:"red"},children:[null===(r=j.code)||void 0===r?void 0:r.message," "]})]})},y=t(1163);function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var w=function(e){var r,t,n=e.email,o=e.setError,i=e.Error,f=(0,u.cI)({resolver:(0,a.F)(p.KW)}),m=f.register,b=f.handleSubmit,j=f.formState.errors,O=(0,y.useRouter)(),v=function(){var e=(0,s.Z)(c().mark((function e(r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.password;try{l.Z.post("api/auth/changePassword",{email:n,password:t}),O.push("/login")}catch(s){console.log(s),o(s.response.data.message)}case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,d.jsxs)("form",{onSubmit:b(v),children:[(0,d.jsx)("input",h({id:"password",type:"password"},m("password"))),(0,d.jsx)("input",h({id:"password",placeholder:"\u78ba\u8a8d\u7528\u30d1\u30b9\u30ef\u30fc\u30c9",type:"password"},m("passwordConfirmation"))),(0,d.jsx)("button",{type:"submit",children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4"}),(0,d.jsx)("div",{children:i}),(0,d.jsxs)("p",{style:{marginBottom:"14px",color:"red"},children:[null===(r=j.password)||void 0===r?void 0:r.message," ",null===(t=j.passwordConfirmation)||void 0===t?void 0:t.message," "]})]})},x=function(){var e=(0,n.useState)(""),r=e[0],t=e[1],o=(0,n.useState)(""),s=o[0],i=o[1],c=(0,n.useState)(0),a=c[0],u=c[1];return(0,d.jsxs)("div",{children:[0===a&&(0,d.jsx)(b,{setVisible:u,setEmail:i,setError:t,Error:r}),1===a&&(0,d.jsx)(v,{email:s,setError:t,Error:r,setVisible:u}),2===a&&(0,d.jsx)(w,{email:s,setError:t,Error:r})]})}},337:function(e,r,t){"use strict";t.d(r,{FB:function(){return i},KW:function(){return u},k:function(){return s},lF:function(){return a},nq:function(){return p},zk:function(){return c}});var n=t(1604),o=n.z.object({email:n.z.string().email("\u6b63\u3057\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),password:n.z.string().min(6,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f6\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").max(50,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f50\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}),s=o.extend({}),i=o.extend({username:n.z.string().min(1,"\u30e6\u30fc\u30b6\u30fc\u540d\u306f1\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").max(15,"\u30e6\u30fc\u30b6\u30fc\u540d\u306f15\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),passwordConfirmation:n.z.string().min(6,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f6\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").max(50,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f50\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}),c=o.omit({password:!0}),a=n.z.object({code:n.z.number().min(1e4,"\u30b3\u30fc\u30c9\u306f5\u6841\u306e\u6570\u5024\u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093").max(99999,"\u30b3\u30fc\u30c9\u306f5\u6841\u306e\u6570\u5024\u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093")}),u=o.omit({email:!0}).extend({passwordConfirmation:n.z.string().min(6,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f6\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").max(50,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f50\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}),p=n.z.object({username:n.z.string().min(1,"\u30e6\u30fc\u30b6\u30fc\u540d\u306f1\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").max(15,"\u30e6\u30fc\u30b6\u30fc\u540d\u306f15\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").optional(),description:n.z.string().max(50,"\u81ea\u5df1\u7d39\u4ecb\u306f50\u6587\u5b57\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044").optional()})},2916:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset",function(){return t(1463)}])},1163:function(e,r,t){e.exports=t(9898)}},function(e){e.O(0,[536,760,774,888,179],(function(){return r=2916,e(e.s=r);var r}));var r=e.O();_N_E=r}]);