(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3540:function(e,t,n){"use strict";var o=n(4836);t.Z=void 0;var i=o(n(4938)),r=n(5893),s=(0,i.default)((0,r.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");t.Z=s},6702:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var o=n(66).ZP.img.withConfig({displayName:"UserIconImg",componentId:"sc-k5eqd1-0"})(["object-fit:cover;border-radius:100%;width:46px;height:46px;background-color:#fff;"])},422:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(7294),i=n(66),r=n(3946),s=n(1664),a=n.n(s),l=n(5893),c=function(e){var t=e.children,n=e.link;return(0,l.jsx)(p,{href:n,children:(0,l.jsx)(d,{children:t})})},d=(0,i.ZP)(r.Z).withConfig({displayName:"Icon__SIconButton",componentId:"sc-2ipogh-0"})(["padding:8px;text-decoration:none;font-size:inherit !important;width:160px;color:#fff;display:flex !important;align-items:center !important;color:inherit !important;border-radius:22px !important;flex-direction:column;@media (min-width:768px){}@media (min-width:1264px){text-align:left !important;flex-direction:row;}"]),p=(0,i.ZP)(a()).withConfig({displayName:"Icon__SLink",componentId:"sc-2ipogh-1"})(["text-decoration:none;color:#000;@media (min-width:425px){}"]),f=n(6638),u=n(4193),h=function(e){var t=e.isIcon;return(0,l.jsx)("div",{children:(0,l.jsxs)(c,{link:"/",children:[t?(0,l.jsx)(f.Z,{style:{width:"32",height:"32"}}):(0,l.jsx)(u.Z,{style:{width:"32",height:"32"}}),(0,l.jsx)(g,{isIcon:t,children:"\u30db\u30fc\u30e0"})]})})},g=i.ZP.small.withConfig({displayName:"Home__SIconText",componentId:"sc-1uvcjko-0"})(["font-weight:",";flex:1;width:120px;@media (min-width:768px){display:none;}@media (min-width:1264px){display:block;margin-left:auto;margin-left:30px !important;}"],(function(e){return e.isIcon?"800":"normal"})),m=n(6702),x=n(9473),w=function(e){var t=e.isIcon,n=(0,x.v9)((function(e){return e.user.user})),i=(0,o.useState)(""),r=(i[0],i[1]);return(0,o.useEffect)((function(){r(null===n||void 0===n?void 0:n.profileImg)}),[n]),(0,l.jsxs)(c,{link:"/profile/".concat(null===n||void 0===n?void 0:n.username),children:[(0,l.jsx)(v,{src:null===n||void 0===n?void 0:n.profileImg,isIcon:t}),(0,l.jsx)(b,{isIcon:t,children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})]})},b=i.ZP.small.withConfig({displayName:"UserProfileIcon__SIconText",componentId:"sc-cuqkfo-0"})(["font-weight:",";letter-spacing:-0.1em;@media (min-width:432px){letter-spacing:0;}@media (min-width:768px){display:none;}@media (min-width:1264px){width:90px !important;margin-left:30px !important;display:block;}"],(function(e){return e.isIcon?"800":"normal"})),v=(0,i.ZP)(m.h).withConfig({displayName:"UserProfileIcon__SProfileIcon",componentId:"sc-cuqkfo-1"})(["width:32px;height:32px;padding-left:0;box-sizing:border-box;border:",";"],(function(e){return e.isIcon?"2px solid #000":"none"})),_=function(){return(0,l.jsx)(c,{link:"/add-post",children:(0,l.jsx)(k,{children:(0,l.jsx)(y,{})})})},k=i.ZP.div.withConfig({displayName:"AddPostIcon__ButtonContainer",componentId:"sc-mficnp-0"})(["display:flex;align-items:center;justify-content:center;width:40px;height:28px;background:linear-gradient(90deg,#e1f5fe 48%,#ffc1c1 52%);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);"]),y=i.ZP.div.withConfig({displayName:"AddPostIcon__PlusSign",componentId:"sc-mficnp-1"})(["width:28px;height:100%;background-color:#ffffff;border-radius:4px;position:relative;::before,::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000;border-radius:2px;}::before{width:3px;height:16px;}::after{width:16px;height:3px;}"]),j=function(){var e=(0,o.useState)(!0),t=e[0],n=(e[1],(0,o.useState)(!0)),i=n[0],r=(n[1],(0,o.useState)(!0)),s=r[0];r[1];return(0,l.jsxs)(I,{children:[(0,l.jsx)(h,{isIcon:t}),(0,l.jsx)(_,{isIcon:i}),(0,l.jsx)(w,{isIcon:s})]})},I=i.ZP.footer.withConfig({displayName:"Footer__SFooter",componentId:"sc-6k62fi-0"})(["position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;z-index:1000000;background-color:rgb(255,255,255);width:100%;justify-content:space-around;border-top:1px solid #dbdbdb;@media (min-width:768px){padding:30px 0px 30px 20px;justify-content:space-between;height:280px;flex-direction:column;position:relative;flex:0.2;}@media (min-width:1264px){align-items:start;}"]),P=i.ZP.div.withConfig({displayName:"Layout__SFlex",componentId:"sc-675s55-0"})(["position:relative;display:flex;width:100%;"]),C=function(e){var t=e.children;return(0,l.jsxs)(P,{children:[(0,l.jsx)(j,{}),t]})}},4741:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return K},default:function(){return Q}});var o=n(29),i=n(7794),r=n.n(i),s=n(7294),a=n(66),l=n(1664),c=n.n(l),d=n(3385),p=n(5121),f=n(9473),u=n(1697),h=n(1163),g=n(5893),m=function(e){var t=e.isGood;return(0,g.jsx)(x,{isGood:t,children:(0,g.jsx)("i",{className:"material-icons heart",children:"favorite"})})},x=a.ZP.div.withConfig({displayName:"HeartIcon__HeartClick",componentId:"sc-1b7z41-0"})(["animation:",";"],(function(e){return e.isGood?(0,a.iv)([""," 1.2s forwards cubic-bezier(0.19,1,0.22,1)"],w):(0,a.iv)([""," 1.2s forwards cubic-bezier(0.19,1,0.22,1)"],b)})),w=(0,a.F4)(["0%{transform:scale(0) rotate(0);}50%{transform:scale(1) rotate(0) ease;background:linear-gradient(90deg,#ff0011,#ff000d 30%,hsl(0,95%,56%));background:-webkit-linear-gradient(90deg,#d6f700,#a2ff00 30%,#ffefd1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}55%{transform:scale(1.3) rotate(0deg) translateY(-50%);background:linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);background:-webkit-linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}80%{transform:scale(1.3) rotate(0deg) translateY(-30%);background:linear-gradient( 90deg,hsl(57,100%,81%),hsl(57,97%,45%),hsl(57,100%,84%) );background:-webkit-linear-gradient( 90deg,hsl(57,100%,81%),hsl(57,97%,45%),hsl(57,100%,84%) );-webkit-background-clip:text;-webkit-text-fill-color:transparent;}90%{transform:scale(1.3) rotate(45deg) translateY(-10%);background:linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);background:-webkit-linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}100%{transform:scale(1) rotate(0) translateY(0);color:#ff6702;}"]),b=(0,a.F4)(["0%{color:#ecaa25}100%{color:#d2c4c4}"]),v=n(3946),_=a.ZP.div.withConfig({displayName:"BaseBtn",componentId:"sc-vyvasj-0"})(["font-size:12px;font-weight:bold;width:100%;"]),k=(0,s.memo)((function(e){var t=e.children,n=e.onClickFollow;return console.log("FollowButton"),(0,g.jsx)(v.Z,{style:{padding:"0px"},onClick:n,children:(0,g.jsx)(y,{className:"unfollow-bg-color",children:t})})})),y=(0,a.ZP)(_).withConfig({displayName:"FollowButton__SUnFollowBtn",componentId:"sc-wzess8-0"})(["width:100%;font-size:12px;font-weight:bold;padding:6px 15px 5px 17px;border-radius:8px;background:#ff8d06;color:#fff;&:hover{background:#ff6702;}"]),j=(0,s.memo)((function(e){console.log("%cChild render\u3000OnFollowBtn","color:blue");var t=e.children,n=e.onClickUnFollow;return(0,g.jsx)(v.Z,{style:{padding:"0px"},onClick:n,children:(0,g.jsx)(I,{children:t})})})),I=(0,a.ZP)(_).withConfig({displayName:"FollowingButton__SOnFollowBtn",componentId:"sc-3077yn-0"})(["width:100%;font-size:12px;font-weight:bold;padding:6px 15px 5px 17px;border-radius:8px;border:none;color:#0f0f0f;background-color:rgba(0,0,0,0.05);&:hover{background-color:#dbdbdb;}"]),P=s.memo((function(e){var t,n=e.loginUser,o=e.postUserId,i=e.onClickFollow,r=e.onClickUnFollow;return n&&n._id!==o?(null===(t=n.followings)||void 0===t?void 0:t.includes(o))?(0,g.jsx)(j,{onClickUnFollow:r,children:"\u30d5\u30a9\u30ed\u30fc\u4e2d"}):(0,g.jsx)(k,{onClickFollow:i,children:"\u30d5\u30a9\u30ed\u30fc"}):null})),C=function(e){var t=e.post,n=function(){var e=(0,f.I0)(),t=function(){var t=(0,o.Z)(r().mark((function t(n,o){var i,s,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=15;break}return t.prev=1,i=n.userId,t.next=5,p.Z.put("/api/users/".concat(i,"/follow"),{userId:o._id});case 5:s=t.sent,a=s.data,e((0,u.Gm)(a)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:t.next=16;break;case 15:console.log("Error: loginUser is null");case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}();return{followUser:t}}(),i=n.followUser,a=function(){var e=(0,f.I0)(),t=function(){var t=(0,o.Z)(r().mark((function t(n,o){var i,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=14;break}return t.prev=1,t.next=4,p.Z.put("/api/users/".concat(n.userId,"/unfollow"),{userId:o._id});case 4:i=t.sent,s=i.data,e((0,u.Gm)(s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:t.next=15;break;case 14:console.log("Error: loginUser is null");case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}();return{unFollowUser:t}}(),l=a.unFollowUser,x=function(){var e=(0,s.useState)(),t=e[0],n=e[1],i=function(){var e=(0,o.Z)(r().mark((function e(t){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.get("/api/users/".concat(t.userId));case 2:o=e.sent,n(o.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getAuthorByPostId:i,user:t}}(),w=x.getAuthorByPostId,b=x.user,v=(0,h.useRouter)(),_=(0,d.v)((function(e){return e.user})),k=_.user,y=_.loading,j=function(e,t){var n=(0,s.useState)(!!t&&e.likes.includes(t._id)),i=n[0],a=n[1];return{toggleLike:(0,s.useCallback)((0,o.Z)(r().mark((function n(){var o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,i?--e.likes.length:++e.likes.length,n.next=6,p.Z.put("/api/posts/".concat(e._id,"/like"),{userId:t._id});case 6:o=n.sent,a(o.data),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])}))),[i,e,t]),isGood:i}}(t,k),I=j.toggleLike,C=j.isGood;(0,s.useEffect)((function(){k||y||v.push("/login")}),[y,k,v]),(0,s.useEffect)((function(){w(t)}),[t]);var G=(0,s.useCallback)((function(){return i(t,k)}),[t._id,null===k||void 0===k?void 0:k._id,i]),A=(0,s.useCallback)((function(){return l(t,k)}),[t._id,null===k||void 0===k?void 0:k._id,l]);return k?(0,g.jsxs)(L,{children:[t.img&&(0,g.jsx)(M,{src:t.img,alt:""}),(0,g.jsx)(H,{}),(0,g.jsxs)(N,{children:[(0,g.jsxs)(S,{children:[(0,g.jsx)(c(),{href:"profile/".concat(null===b||void 0===b?void 0:b.username),children:(0,g.jsx)(B,{src:null===b||void 0===b?void 0:b.profileImg})}),(0,g.jsxs)(z,{children:[(0,g.jsx)(U,{children:null===b||void 0===b?void 0:b.username}),(0,g.jsx)(P,{loginUser:k,postUserId:t.userId,onClickFollow:G,onClickUnFollow:A})]})]}),(0,g.jsx)(O,{children:(0,g.jsx)(F,{children:t.desc})})]}),(0,g.jsxs)(V,{children:[(0,g.jsx)(Z,{onClick:I,children:(0,g.jsx)(m,{isGood:C})}),(0,g.jsx)(E,{children:t.likes.length})]})]}):null},Z=a.ZP.div.withConfig({displayName:"PostView__SHeartBox",componentId:"sc-mp07b1-0"})(["cursor:pointer;"]),N=a.ZP.div.withConfig({displayName:"PostView__SPostContent",componentId:"sc-mp07b1-1"})(["position:absolute;top:25%;left:38px;width:74%;height:70%;"]),S=a.ZP.header.withConfig({displayName:"PostView__SPostHeader",componentId:"sc-mp07b1-2"})(["display:flex;align-items:start;"]),O=a.ZP.div.withConfig({displayName:"PostView__SDescContainer",componentId:"sc-mp07b1-3"})(["height:50%;display:flex;flex-direction:column;justify-content:center;text-align:left;"]),F=a.ZP.p.withConfig({displayName:"PostView__SPostArticle",componentId:"sc-mp07b1-4"})(["font-size:24px;color:#000;font-weight:normal;line-height:1.5em;text-shadow:0px 0px 1px rgba(0,0,0,0.2);"]),z=a.ZP.div.withConfig({displayName:"PostView__Box",componentId:"sc-mp07b1-5"})(["margin-left:20px;"]),B=a.ZP.img.withConfig({displayName:"PostView__SUserIconImg",componentId:"sc-mp07b1-6"})(["object-fit:cover;border-radius:100%;max-width:none;width:52px;height:52px;background-color:#fff;cursor:pointer;"]),U=a.ZP.h1.withConfig({displayName:"PostView__SUserName",componentId:"sc-mp07b1-7"})(["color:#000;font-size:16px;font-weight:bold;"]),V=a.ZP.div.withConfig({displayName:"PostView__SAside",componentId:"sc-mp07b1-8"})(["position:absolute;display:flex;flex-direction:column;top:62%;align-items:center;right:10px;padding:20px;text-align:center;"]),E=a.ZP.span.withConfig({displayName:"PostView__HeartCount",componentId:"sc-mp07b1-9"})(["margin-bottom:18px;color:#000;"]),L=a.ZP.div.withConfig({displayName:"PostView__PostBorder",componentId:"sc-mp07b1-10"})(["position:relative;width:100%;height:100%;scroll-snap-align:start;scroll-snap-stop:always;"]),H=a.ZP.div.withConfig({displayName:"PostView__SBg",componentId:"sc-mp07b1-11"})(["position:relative;width:100%;height:100vh;object-fit:cover;background-color:#ffffff;"]),M=a.ZP.img.withConfig({displayName:"PostView__SImg",componentId:"sc-mp07b1-12"})(["height:100vh;object-fit:cover;"]),G=n(3540),A=n(422),T=n(3380),R=n.n(T),Y=function(e){var t=e.posts,n=(0,h.useRouter)(),i=(0,d.v)((function(e){return e.user})),a=i.user,l=i.loading,c=(0,f.I0)();(0,s.useEffect)((function(){c((0,u.Ez)())}),[]),(0,s.useEffect)((function(){a||l||n.push("/login")}),[a]);var p=(0,s.useCallback)((0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c((0,u.kS)())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)}))),[c,n]);return l?(0,g.jsx)("div",{className:"loader-container",children:(0,g.jsx)(R(),{color:"#ed6103",loading:!0,size:50})}):(0,g.jsxs)(D,{children:[(0,g.jsx)(q,{onClick:p,children:(0,g.jsx)(G.Z,{style:{fontSize:"14px"}})}),(0,g.jsx)(X,{children:(0,g.jsx)(J,{children:t.map((function(e){return(0,g.jsx)(C,{post:e},e._id)}))})})]})},q=a.ZP.div.withConfig({displayName:"pages__SLogoutButton",componentId:"sc-14p60n7-0"})(["padding:10px;font-size:12px;border-radius:15px;text-align:center;background:#dfdfdf;color:#626161;position:absolute;top:10%;left:20px;cursor:pointer;z-index:10;"]),D=a.ZP.div.withConfig({displayName:"pages__SPostMain",componentId:"sc-14p60n7-1"})(["position:relative;flex:1;@media (min-width:768px){flex:0.9;}@media (min-width:1264px){flex:0.8;}"]),X=a.ZP.div.withConfig({displayName:"pages__PostBg",componentId:"sc-14p60n7-2"})(["color:white;background-color:#000;height:100vh;display:grid;place-items:center;"]),J=a.ZP.div.withConfig({displayName:"pages__PostSlide",componentId:"sc-14p60n7-3"})(["width:100%;height:100%;max-width:100%;border-radius:0;&::-webkit-scrollbar{display:none;}@media (min-width:425px){&{max-width:400px;width:100%;height:95vh;border-radius:20px;}}display:flex;flex:1;align-items:center;flex-direction:column;overflow:scroll;overflow-y:auto;scroll-snap-type:y mandatory;"]);Y.getLayout=function(e){return(0,g.jsx)(A.Z,{children:e})};var K=!0,Q=Y},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4741)}])},3380:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(7294)),c=n(6657),d=(0,n(10).createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");t.default=function(e){var t=e.loading,n=void 0===t||t,i=e.color,r=void 0===i?"#000000":i,s=e.speedMultiplier,p=void 0===s?1:s,f=e.cssOverride,u=void 0===f?{}:f,h=e.size,g=void 0===h?35:h,m=a(e,["loading","color","speedMultiplier","cssOverride","size"]),x=o({background:"transparent !important",width:(0,c.cssValue)(g),height:(0,c.cssValue)(g),borderRadius:"100%",border:"2px solid",borderTopColor:r,borderBottomColor:"transparent",borderLeftColor:r,borderRightColor:r,display:"inline-block",animation:"".concat(d," ").concat(.75/p,"s 0s infinite linear"),animationFillMode:"both"},u);return n?l.createElement("span",o({style:x},m)):null}}},function(e){e.O(0,[452,158,32,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);