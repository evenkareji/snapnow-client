(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{6702:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var i=n(66).ZP.img.withConfig({displayName:"UserIconImg",componentId:"sc-k5eqd1-0"})(["object-fit:cover;border-radius:100%;width:46px;height:46px;background-color:#fff;"])},422:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var i=n(7294),r=n(66),o=n(3946),a=n(1664),c=n.n(a),s=n(5893),d=function(e){var t=e.children,n=e.link;return(0,s.jsx)(p,{href:n,children:(0,s.jsx)(l,{children:t})})},l=(0,r.ZP)(o.Z).withConfig({displayName:"Icon__SIconButton",componentId:"sc-2ipogh-0"})(["padding:8px;text-decoration:none;font-size:inherit !important;width:160px;color:#fff;display:flex !important;align-items:center !important;color:inherit !important;border-radius:22px !important;flex-direction:column;@media (min-width:768px){}@media (min-width:1264px){text-align:left !important;flex-direction:row;}"]),p=(0,r.ZP)(c()).withConfig({displayName:"Icon__SLink",componentId:"sc-2ipogh-1"})(["text-decoration:none;color:#000;@media (min-width:425px){}"]),u=n(6638),f=n(4193),h=function(e){var t=e.isIcon;return(0,s.jsx)("div",{children:(0,s.jsxs)(d,{link:"/",children:[t?(0,s.jsx)(u.Z,{style:{width:"32",height:"32"}}):(0,s.jsx)(f.Z,{style:{width:"32",height:"32"}}),(0,s.jsx)(m,{isIcon:t,children:"\u30db\u30fc\u30e0"})]})})},m=r.ZP.small.withConfig({displayName:"Home__SIconText",componentId:"sc-1uvcjko-0"})(["font-weight:",";flex:1;width:120px;@media (min-width:768px){display:none;}@media (min-width:1264px){display:block;margin-left:auto;margin-left:30px !important;}"],(function(e){return e.isIcon?"800":"normal"})),g=n(6702),x=n(9473),b=function(e){var t=e.isIcon,n=(0,x.v9)((function(e){return e.user.user})),r=(0,i.useState)(""),o=(r[0],r[1]);return(0,i.useEffect)((function(){o(null===n||void 0===n?void 0:n.profileImg)}),[n]),(0,s.jsxs)(d,{link:"/profile/".concat(null===n||void 0===n?void 0:n.username),children:[(0,s.jsx)(y,{src:null===n||void 0===n?void 0:n.profileImg,isIcon:t}),(0,s.jsx)(v,{isIcon:t,children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})]})},v=r.ZP.small.withConfig({displayName:"UserProfileIcon__SIconText",componentId:"sc-cuqkfo-0"})(["font-weight:",";letter-spacing:-0.1em;@media (min-width:432px){letter-spacing:0;}@media (min-width:768px){display:none;}@media (min-width:1264px){width:90px !important;margin-left:30px !important;display:block;}"],(function(e){return e.isIcon?"800":"normal"})),y=(0,r.ZP)(g.h).withConfig({displayName:"UserProfileIcon__SProfileIcon",componentId:"sc-cuqkfo-1"})(["width:32px;height:32px;padding-left:0;box-sizing:border-box;border:",";"],(function(e){return e.isIcon?"2px solid #000":"none"})),w=function(){return(0,s.jsx)(d,{link:"/add-post",children:(0,s.jsx)(j,{children:(0,s.jsx)(_,{})})})},j=r.ZP.div.withConfig({displayName:"AddPostIcon__ButtonContainer",componentId:"sc-mficnp-0"})(["display:flex;align-items:center;justify-content:center;width:40px;height:28px;background:linear-gradient(90deg,#e1f5fe 48%,#ffc1c1 52%);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);"]),_=r.ZP.div.withConfig({displayName:"AddPostIcon__PlusSign",componentId:"sc-mficnp-1"})(["width:28px;height:100%;background-color:#ffffff;border-radius:4px;position:relative;::before,::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000;border-radius:2px;}::before{width:3px;height:16px;}::after{width:16px;height:3px;}"]),O=function(){var e=(0,i.useState)(!0),t=e[0],n=(e[1],(0,i.useState)(!0)),r=n[0],o=(n[1],(0,i.useState)(!0)),a=o[0];o[1];return(0,s.jsxs)(P,{children:[(0,s.jsx)(h,{isIcon:t}),(0,s.jsx)(w,{isIcon:r}),(0,s.jsx)(b,{isIcon:a})]})},P=r.ZP.footer.withConfig({displayName:"Footer__SFooter",componentId:"sc-6k62fi-0"})(["position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;z-index:1000000;background-color:rgb(255,255,255);width:100%;justify-content:space-around;border-top:1px solid #dbdbdb;@media (min-width:768px){padding:30px 0px 30px 20px;justify-content:space-between;height:280px;flex-direction:column;position:relative;flex:0.2;}@media (min-width:1264px){align-items:start;}"]),I=r.ZP.div.withConfig({displayName:"Layout__SFlex",componentId:"sc-675s55-0"})(["position:relative;display:flex;width:100%;"]),k=function(e){var t=e.children;return(0,s.jsxs)(I,{children:[(0,s.jsx)(O,{}),t]})}},4493:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var i=n(9499),r=n(7294),o=n(66),a=o.ZP.textarea.withConfig({displayName:"TextArea",componentId:"sc-149b9qh-0"})(["@media (max-width:425px){&{font-size:18px;}}padding:14px 3px;width:100%;max-width:500px;font-size:24px;resize:none;border:none;outline:none;height:auto;min-height:122px;&::placeholder{color:#ce936c;}"]),c=n(6702),s=n(29),d=n(7794),l=n.n(d),p=n(5121),u=n(7896),f=n(1163),h=n(3385),m=n(422),g=n(9473),x=n(1697),b=n(7536),v=n(2757),y=n.n(v),w=n(2105),j=n.n(w),_=n(5893);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],i=(0,r.useState)(),o=i[0],c=i[1],d=(0,r.useState)(!1),m=d[0],v=d[1],w=(0,b.cI)(),O=w.register,I=w.handleSubmit,M=w.watch,A=w.setValue,F=M("desc","");(0,r.useEffect)((function(){var e=F.trim().length;n(e>0&&e<=50)}),[F,n]);var D=function(e,t){var n=(0,f.useRouter)(),i=(0,h.v)((function(e){return e.user})).user,r=function(){var r=(0,s.Z)(l().mark((function r(o){var a,c,s,d,f,h;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t(!0),o&&i){r.next=3;break}return r.abrupt("return");case 3:if(a={userId:i._id,desc:o},!e){r.next=23;break}return c=(0,u.Z)(e),s="".concat(i.username,"/post Image"),(d=new FormData).append("path",s),d.append("file",c),r.prev=10,r.next=13,p.Z.post("/api/upload/uploadImages",d);case 13:f=r.sent,h=f.data,console.log(h,"data"),a.img=h.url.url,r.next=23;break;case 19:r.prev=19,r.t0=r.catch(10),console.log(r.t0),alert(r.t0);case 23:return r.prev=23,r.next=26,p.Z.post("/api/posts",a);case 26:n.push("/"),r.next=32;break;case 29:r.prev=29,r.t1=r.catch(23),console.log(r.t1);case 32:return r.prev=32,t(!1),r.finish(32);case 35:case"end":return r.stop()}}),r,null,[[10,19],[23,29,32,35]])})));return function(e){return r.apply(this,arguments)}}();return{AddPost:r,user:i}}(o,v),L=D.AddPost,R=(0,f.useRouter)(),T=(0,g.I0)(),U=(0,h.v)((function(e){return e.user})),B=U.user,V=U.loading;(0,r.useEffect)((function(){T((0,x.Ez)())}),[]),(0,r.useEffect)((function(){B||V||R.push("/login")}),[B]);return V?(0,_.jsx)("div",{className:"loader-container",children:(0,_.jsx)(y(),{color:"#ed6103",loading:!0,size:50})}):(0,_.jsx)(k,{children:(0,_.jsx)(z,{children:(0,_.jsx)(Z,{htmlFor:"textForm",children:(0,_.jsxs)(C,{method:"post",onSubmit:I((function(e){var t=e.desc;return L(t)})),children:[(0,_.jsx)(S,{src:null===B||void 0===B?void 0:B.profileImg}),(0,_.jsx)(a,P(P({placeholder:"50\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},O("desc")),{},{onChange:function(e){!function(e){var t=e.target.value.trim().length;n(t>0&&t<=50)}(e),A("desc",e.target.value)}})),o&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("img",{src:o,alt:""})}),(0,_.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){c(e.target.result)}}}}),(0,_.jsx)(E,{}),(0,_.jsxs)("p",{style:{color:F.length>50?"red":"inherit"},children:[F.length,"/50"]}),(0,_.jsx)(N,{isText:t,disabled:m,type:"submit",children:m?(0,_.jsx)(j(),{color:"#fff",size:5}):"\u9001\u4fe1"})]})})})})},k=o.ZP.div.withConfig({displayName:"add-post__SPostBox",componentId:"sc-2k7fvz-0"})(["flex:1;@media (min-width:768px){flex:0.9;}@media (min-width:1264px){flex:0.8;}"]),S=(0,o.ZP)(c.h).withConfig({displayName:"add-post__SUserIconImg",componentId:"sc-2k7fvz-1"})([""]),Z=o.ZP.label.withConfig({displayName:"add-post__SLabel",componentId:"sc-2k7fvz-2"})(["display:block;max-width:500px;width:70%;margin:0 auto;background-color:#fff;padding:32px 0 72px;border-radius:20px;"]),C=o.ZP.form.withConfig({displayName:"add-post__SForm",componentId:"sc-2k7fvz-3"})(["position:relative;z-index:2;max-width:500px;width:90%;margin:0 auto;background-color:#fff;"]),z=o.ZP.div.withConfig({displayName:"add-post__Scenter",componentId:"sc-2k7fvz-4"})(["width:100%;height:100vh;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center;"]),N=o.ZP.button.withConfig({displayName:"add-post__SSubmit",componentId:"sc-2k7fvz-5"})(["width:125px;@media (max-width:425px){&{width:100px;font-size:12px;}}text-align:center;font-size:14px;font-weight:bold;padding:10px 15px 10px 17px;border-radius:22px;border:none;color:#fff;background-color:#ed6103;border:none;margin-left:auto;&:hover{background-color:#ff6702;}pointer-events:",";background-color:",";cursor:pointer;"],(function(e){return e.isText?"auto":"none"}),(function(e){return e.isText?"#ff6702":"#9e9c9c"})),E=o.ZP.hr.withConfig({displayName:"add-post__SHr",componentId:"sc-2k7fvz-6"})(["border:1px solid rgb(207,217,222);margin-top:52px;margin-bottom:42px;"]);I.getLayout=function(e){return(0,_.jsx)(m.Z,{children:e})};var M=I},841:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-post",function(){return n(4493)}])},2105:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},c=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(7294)),d=n(6657),l=(0,n(10).createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");t.default=function(e){var t=e.loading,n=void 0===t||t,r=e.color,o=void 0===r?"#000000":r,a=e.speedMultiplier,p=void 0===a?1:a,u=e.cssOverride,f=void 0===u?{}:u,h=e.size,m=void 0===h?15:h,g=e.margin,x=void 0===g?2:g,b=c(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),v=i({display:"inherit"},f),y=function(e){return{backgroundColor:o,width:(0,d.cssValue)(m),height:(0,d.cssValue)(m),margin:(0,d.cssValue)(x),borderRadius:"100%",display:"inline-block",animation:"".concat(l," ").concat(.75/p,"s ").concat(.12*e/p,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return n?s.createElement("span",i({style:v},b),s.createElement("span",{style:y(1)}),s.createElement("span",{style:y(2)}),s.createElement("span",{style:y(3)})):null}},2757:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},c=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(7294)),d=n(6657),l=n(10),p=(0,l.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),u=(0,l.createAnimation)("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");t.default=function(e){var t=e.loading,n=void 0===t||t,r=e.color,o=void 0===r?"#000000":r,a=e.speedMultiplier,l=void 0===a?1:a,f=e.cssOverride,h=void 0===f?{}:f,m=e.size,g=void 0===m?60:m,x=c(e,["loading","color","speedMultiplier","cssOverride","size"]),b=(0,d.parseLengthAndUnit)(g),v=b.value,y=b.unit,w=i({display:"inherit",width:(0,d.cssValue)(g),height:(0,d.cssValue)(g),position:"relative"},h),j=function(e){return{position:"absolute",top:"0",left:"0",width:"".concat(v).concat(y),height:"".concat(v).concat(y),border:"".concat(v/10).concat(y," solid ").concat(o),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat(1===e?p:u," ").concat(2/l,"s 0s infinite linear")}};return n?s.createElement("span",i({style:w},x),s.createElement("span",{style:j(1)}),s.createElement("span",{style:j(2)})):null}},7896:function(e,t,n){"use strict";function i(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[560,536,675,664,158,32,774,888,179],(function(){return t=841,e(e.s=t);var t}));var t=e.O();_N_E=t}]);